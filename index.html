<!DOCTYPE html>

<html>
<head>
  <title>Continuity Control API Documentation</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1 id="continuity-control-api-documentation">Continuity Control API Documentation</h1>
<p>This file is automatically generated from the code publically available on <a href="https://github.com/ContinuityControl/control_api_reference">GitHub</a>.</p>
<hr>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>This is a <a href="http://www.sinatrarb.com/">Sinatra</a> application that integrates with the Control API.  Sinatra is a small Ruby web application framework that provides a DSL (domain specific language) for handling HTTP requests like <code>get</code> and <code>post</code>.  It should be easy to read even if you don&#39;t read Sinatra&#39;s documentation.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="keyword">require</span> <span class="string">'sinatra'</span>
<span class="keyword">require</span> <span class="string">'sinatra/reloader'</span> <span class="keyword">if</span> development?
<span class="keyword">require</span> <span class="string">'httparty'</span>
<span class="keyword">require</span> <span class="string">'json'</span>
<span class="keyword">require</span> <span class="string">'dotenv'</span>
<span class="constant">Dotenv</span>.load</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>This class uses a library called HTTParty to connect to the Control API.  All API responses are JSON.  <code>HTTParty</code> automatically detects this and parses into a Ruby object.</p>
<p>For more information, see the <a href="http://johnnunemaker.com/httparty/">HTTParty</a> website.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="class"><span class="keyword">class</span> <span class="title">ControlAPI</span></span>
  <span class="keyword">include</span> <span class="constant">HTTParty</span>
  base_uri <span class="constant">ENV</span>[<span class="string">'CONTROL_API_BASE_URI'</span>]

  basic_auth <span class="constant">ENV</span>[<span class="string">'CONTROL_API_KEY'</span>], <span class="constant">ENV</span>[<span class="string">'CONTROL_API_SECRET'</span>]
<span class="keyword">end</span>

helpers <span class="keyword">do</span>
  <span class="function"><span class="keyword">def</span> <span class="title">parsed_body</span></span>
    request.body.rewind
    <span class="constant">::JSON</span>.parse(request.body.read)
  <span class="keyword">end</span>
<span class="keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>The root path in this application simply provides navigation.</p>
<p><code>erb :view_name</code> renders the file in <code>views/view_name.erb</code>.  For example, this will end up rendering <code>views/root.erb</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>get <span class="string">'/'</span> <span class="keyword">do</span>
  erb <span class="symbol">:root</span>
<span class="keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <h2 id="get-v1-status-json">GET /v1/status.json</h2>
<p>Check the API status.  Useful for testing authentication without knowing other information.</p>
<h3 id="example-request">Example request</h3>
<pre><code>GET /v1/status.json</code></pre>
<h3 id="example-response">Example response</h3>
<h4 id="http-200-ok">HTTP 200 OK</h4>
<pre><code>{&quot;description&quot;:&quot;up&quot;}</code></pre>
<h4 id="http-401-unauthorized">HTTP 401 Unauthorized</h4>
<p>The request was not properly authenticated.</p>
<h4 id="http-500-server-error">HTTP 500 Server Error</h4>
<h3 id="response-fields">Response fields</h3>
<ul>
<li><code>description</code>: A text description of the API state.</li>
<li><code>error</code>: A text description of any error in the API call.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>get <span class="string">'/status'</span> <span class="keyword">do</span>
  status = <span class="constant">ControlAPI</span>.get(<span class="string">'/v1/status.json'</span>).parsed_response

  <span class="keyword">if</span> status[<span class="string">'error'</span>]
    <span class="string">"API error: <span class="subst">#{status[<span class="string">'error'</span>]}</span>"</span>
  <span class="keyword">else</span>
    <span class="string">"API status: <span class="subst">#{status[<span class="string">'description'</span>]}</span>"</span>
  <span class="keyword">end</span>
<span class="keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <h2 id="get-v1-template_to_dos-json">GET /v1/template_to_dos.json</h2>
<p>Get all the TemplateToDos for your organization.  NOTE: not filtered by enabled/disabled state.</p>
<h3 id="example-requests">Example requests</h3>
<pre><code>GET /v1/template_to_dos.json
GET /v1/template_to_dos.json?tags[]=annual&amp;tags[]=security</code></pre>
<h3 id="request-fields">Request fields</h3>
<ul>
<li><code>tags</code>: Only return TemplateToDos that are tagged with all of the specified tags.</li>
</ul>
<h3 id="example-response">Example response</h3>
<h4 id="http-200-ok">HTTP 200 OK</h4>
<pre><code>{
  &quot;template_to_dos&quot;: [
    {
      &quot;uuid&quot;: &quot;12345678-1234-5678-1234-567812345678&quot;,
      &quot;name&quot;: &quot;Review server logs&quot;,
      &quot;tags&quot;: [&quot;security&quot;, &quot;annual&quot;, &quot;training&quot;]
    }
  ]
}</code></pre>
<h4 id="http-500-server-error">HTTP 500 Server Error</h4>
<h3 id="response-fields">Response fields</h3>
<ul>
<li><code>template_to_dos</code>: an Array of TemplateToDos, or an empty array <code>[]</code> if none match the given criteria<ul>
<li><code>uuid</code>: UUID for each TemplateToDo.</li>
<li><code>name</code>: The human-readable name for each ToDo.</li>
<li><code>tags</code>: The tags for each TemplateToDo, as an array of strings. If there are no tags, it will be an empty array.</li>
</ul>
</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>get <span class="string">'/template_to_dos'</span> <span class="keyword">do</span>
  template_to_dos = <span class="constant">ControlAPI</span>.get(<span class="string">"/v1/template_to_dos.json"</span>, <span class="symbol">:query</span> =&gt; params)
  erb <span class="symbol">:template_to_dos</span>, <span class="symbol">:locals</span> =&gt; template_to_dos
<span class="keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <h2 id="post-v1-distributed_to_dos-json">POST /v1/distributed_to_dos.json</h2>
<p><strong>Asynchronously</strong> distribute a ToDo to the given assignees.  (The work happens in a job queue.)</p>
<h3 id="example-request">Example request</h3>
<pre><code>POST /v1/distributed_to_dos.json
Content-Type: application/json

{
  &quot;distributed_to_do&quot;: {
    &quot;template_to_do_uuid&quot;: &quot;12345678-1234-5678-1234-567812345678&quot;,
    &quot;due_on&quot;: &quot;2013-11-29&quot;,
    &quot;assignee_emails&quot;: [&quot;bobama@example.com&quot;, &quot;gwbush@example.com&quot;, &quot;bclinton@example.com&quot;],
    &quot;field_values&quot;: {&quot;field1&quot;: &quot;value1&quot;, &quot;field2&quot;: &quot;value2&quot;},
    &quot;metadata&quot;: {&quot;customer_id&quot;: &quot;7676767&quot;, &quot;loan_id&quot;: &quot;1234-7890&quot;}
  }
}</code></pre>
<h3 id="request-fields">Request fields</h3>
<ul>
<li><code>distributed_to_do</code>: <strong>Required</strong>.  Holds parameters for the DistributedToDo.<ul>
<li><code>template_to_do_uuid</code>: <strong>Required</strong>.  The UUID for the TemplateToDo that will be distributed.  This can be found via <code>GET /v1/template_to_dos</code>, or in Continuity Control under &quot;Settings&quot;.</li>
<li><code>due_on</code>: <strong>Required</strong>.  ISO8601 date of when the DistributedToDo is due, in UTC.</li>
<li><code>assignee_emails</code>: <strong>Required</strong>.  An Array of email addresses of Users that will receive the DistributedToDos.</li>
<li><code>field_values</code>: Dictionary (Object) of values to pre-fill in the DistributedToDo.  Field names are available in Continuity Control under &quot;Settings&quot;.</li>
<li><code>metadata</code>: Dictionary (Object) of additional key-value pairs. Values must be strings. Metadata can be used to hold any extra related data, and can be used in querying.  The key and value combined are limited to 247 characters.</li>
</ul>
</li>
</ul>
<h3 id="example-responses">Example responses</h3>
<h4 id="http-202-accepted">HTTP 202 Accepted</h4>
<pre><code>{
  &quot;uuid&quot;:&quot;f81d4fae-7dec-11d0-a765-00a0c91e6bf6&quot;,
  &quot;path&quot;:&quot;/v1/distributed_to_dos/f81d4fae-7dec-11d0-a765-00a0c91e6bf6&quot;
}</code></pre>
<h4 id="http-401-unauthorized">HTTP 401 Unauthorized</h4>
<p>The request was not properly authenticated.</p>
<h4 id="http-422-unprocessable-entity">HTTP 422 Unprocessable Entity</h4>
<pre><code>{
  &quot;errors&quot;: {
    &quot;template_to_do_uuid&quot;: [
      &quot;does not exist&quot;,
    ],
    &quot;assignee_emails&quot;: [
      &quot;has email alice@example.com which does not exist for this organization&quot;,
      &quot;has email bob@example.com which does not exist for this organization&quot;
    ],
    &quot;due_on&quot;: [
      &quot;could not be parsed&quot;
    ]
  }
}</code></pre>
<h4 id="http-500-server-error">HTTP 500 Server Error</h4>
<h3 id="response-fields">Response fields</h3>
<ul>
<li><code>uuid</code>: A UUID for the DistributedToDo which will be created asynchronously. Please include it in any bug reports to Continuity.</li>
<li><code>path</code>: The path where the DistributedToDo will be available once created.</li>
<li><code>errors</code>: An object with one key per request field and an array of all the validation errors that apply to that field.  The exact text of the error messages <strong>is not</strong> guaranteed and may change without warning.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>get <span class="string">'/distributed_to_dos/new'</span> <span class="keyword">do</span>
  erb <span class="symbol">:distributed_to_dos_new</span>
<span class="keyword">end</span>

post <span class="string">'/distributed_to_dos'</span> <span class="keyword">do</span>
  distributed_to_do = <span class="constant">ControlAPI</span>.post(<span class="string">'/v1/distributed_to_dos.json'</span>,
                                      <span class="symbol">:body</span> =&gt; params.to_json,
                                      <span class="symbol">:headers</span> =&gt; { <span class="string">'Content-Type'</span> =&gt; <span class="string">'application/json'</span> })

  <span class="keyword">case</span> distributed_to_do.response.code
  <span class="keyword">when</span> <span class="string">'202'</span>
    [<span class="number">200</span>, erb(<span class="symbol">:distributed_to_dos_post</span>, <span class="symbol">:locals</span> =&gt; distributed_to_do)]
  <span class="keyword">when</span> <span class="string">'422'</span>
    [<span class="number">422</span>, erb(<span class="symbol">:distributed_to_dos_errors</span>, <span class="symbol">:locals</span> =&gt; distributed_to_do)]
  <span class="keyword">else</span>
    [<span class="number">500</span>, <span class="string">'There was an error while processing your request'</span>]
  <span class="keyword">end</span>
<span class="keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <h2 id="get-v1-distributed_to_dos-uuid-json">GET /v1/distributed_to_dos/:uuid.json</h2>
<p>Get the current state of a distributed_to_do as found by an <code>uuid</code>.</p>
<h3 id="example-requests">Example requests</h3>
<pre><code>GET /v1/distributed_to_dos/f81d4fae-7dec-11d0-a765-00a0c91e6bf6.json</code></pre>
<h3 id="example-response">Example response</h3>
<h4 id="http-200-ok">HTTP 200 OK</h4>
<pre><code>{
  &quot;uuid&quot;: &quot;f81d4fae-7dec-11d0-a765-00a0c91e6bf6&quot;,
  &quot;name&quot;: &quot;Review server logs&quot;,
  &quot;created_at&quot;: &quot;2013-11-02T12:34:46.000Z&quot;,
  &quot;completed_at&quot;: &quot;2013-11-07T12:34:56.000Z&quot;,
  &quot;due_on&quot;: &quot;2013-11-08&quot;,
  &quot;tags&quot;: [&quot;security&quot;, &quot;annual&quot;, &quot;training&quot;],
  &quot;metadata&quot;: {
    &quot;customer_id&quot;: &quot;7676767&quot;,
    &quot;loan_id&quot;: &quot;1234-7890&quot;
  },
  &quot;assignments&quot;: [
    {
      &quot;email&quot;: &quot;bobama@example.com&quot;,
      &quot;finished_on&quot;: &quot;2013-11-07&quot;
    },
    {
      &quot;email&quot;: &quot;bclinton@example.com&quot;,
      &quot;finished_on&quot;: null
    }
  ]
}</code></pre>
<h4 id="http-401-unauthorized">HTTP 401 Unauthorized</h4>
<p>The request was not properly authenticated.</p>
<h4 id="http-404-not-found">HTTP 404 Not Found</h4>
<p>Returned when the resource does not exist.  Note that after a <code>POST</code> to <code>/v1/distributed_to_dos.json</code> that gives a <code>202</code>, <code>/v1/distributed_to_dos/:uuid.json</code> would return a <code>404</code> until the resource is <strong>asynchronously</strong> created.</p>
<h4 id="http-500-server-error">HTTP 500 Server Error</h4>
<h3 id="response-fields">Response fields</h3>
<ul>
<li><code>uuid</code>: UUID for this DistributedToDo.</li>
<li><code>name</code>: The human-readable name for this ToDo.</li>
<li><code>created_at</code>: ISO8601 datetime of the creation of this DistributedToDo, in UTC.</li>
<li><code>completed_at</code>: ISO8601 datetime of when the DistributedToDo was completed, in UTC.  This is when all the assignments have been finished.</li>
<li><code>due_on</code>: ISO8601 date of when the DistributedToDo is due, in UTC.</li>
<li><code>tags</code>: The tags for this DistributedToDo, as an array of strings. If there are no tags, it will be an empty array.</li>
<li><code>metadata</code>: The metadata for this DistributedToDo, as an object. If there are no metadata, it will be an empty object. Values will always be returned as strings.</li>
<li><code>assignments</code>: Array<ul>
<li><code>email</code>: User email of DistributedToDo assignment</li>
<li><code>completed_on</code>: ISO8601 date on which the assignment was completed (in UTC), or <code>null</code> if not completed</li>
</ul>
</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>get <span class="string">'/distributed_to_dos/:uuid'</span> <span class="keyword">do</span>
  distributed_to_do = <span class="constant">ControlAPI</span>.get(<span class="string">"/v1/distributed_to_dos/<span class="subst">#{params[<span class="symbol">:uuid</span>]}</span>.json"</span>)

  <span class="keyword">case</span> distributed_to_do.response.code
  <span class="keyword">when</span> <span class="string">'200'</span>
    erb <span class="symbol">:distributed_to_do</span>, <span class="symbol">:locals</span> =&gt; distributed_to_do
  <span class="keyword">when</span> <span class="string">'404'</span>
    [<span class="number">404</span>, <span class="string">'Not found'</span>]
  <span class="keyword">else</span>
    [<span class="number">500</span>, <span class="string">'There was an error while processing your request'</span>]
  <span class="keyword">end</span>
<span class="keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <h2 id="get-v1-distributed_to_dos-json">GET /v1/distributed_to_dos.json</h2>
<p>Get all the DistributedToDos for your organization.  Each DistributedToDo in this &quot;collection&quot; GET request is in the same format as the &quot;member&quot; GET request.</p>
<h3 id="example-requests">Example requests</h3>
<pre><code>GET /v1/distributed_to_dos.json
GET /v1/distributed_to_dos.json?created_after=2013-11-02
GET /v1/distributed_to_dos.json?created_after=2013-11-02&amp;created_before=2013-11-07
GET /v1/distributed_to_dos.json?created_before=2013-11-07
GET /v1/distributed_to_dos.json?late=true
GET /v1/distributed_to_dos.json?complete=true
GET /v1/distributed_to_dos.json?created_after=2013-11-02&amp;created_before=2013-11-07&amp;late=true&amp;complete=false
GET /v1/distributed_to_dos.json?tags[]=annual&amp;tags[]=security
GET /v1/distributed_to_dos.json?metadata[customer_id]=7676767
GET /v1/distributed_to_dos.json?metadata[customer_id]=7676767&amp;metadata[loan_id]=1234-7890</code></pre>
<h3 id="request-fields">Request fields</h3>
<ul>
<li><code>created_after</code>: ISO8601 date of exclusive lower bound of <code>created_at</code> time.</li>
<li><code>created_before</code>: ISO8601 date of exclusive upper bound of <code>created_at</code> time.</li>
<li><code>late</code>: When <code>true</code>, respond with only &quot;late&quot; DistributedToDos.  When <code>false</code>, respond with only &quot;on time&quot; DistributedToDos.  When not present, do not filter on lateness.</li>
<li><code>complete</code>: When <code>true</code>, respond with only &quot;complete&quot; DistributedToDos.  When <code>false</code>, respond with only &quot;incomplete&quot; DistributedToDos.  When not present, do not filter on completeness.</li>
<li><code>tags</code>: Only return DistributedToDos that are tagged with all of the specified tags.</li>
<li><code>metadata</code>: Only return DistributedToDos that have all the specified metadata.</li>
</ul>
<p><code>late</code> and <code>complete</code> can be combined to filter:</p>
<pre><code>late=false&amp;complete=false  # incomplete and on time
late=false&amp;complete=true   # completed and on time
late=true&amp;complete=false   # incomplete and late (what most users will want)
late=true&amp;complete=true    # completed and late</code></pre>
<h3 id="example-response">Example response</h3>
<h4 id="http-200-ok">HTTP 200 OK</h4>
<pre><code>{
  &quot;distributed_to_dos&quot;: [
    // Content from GET /v1/distributed_to_dos/:uuid
  ]
}</code></pre>
<h4 id="http-500-server-error">HTTP 500 Server Error</h4>
<h3 id="response-fields">Response fields</h3>
<ul>
<li><code>distributed_to_dos</code>: an Array of DistributedToDos, or an empty array <code>[]</code> if none match the given criteria</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>get <span class="string">'/distributed_to_dos'</span> <span class="keyword">do</span>
  one_week_ago_params = { <span class="symbol">:created_after</span> =&gt; <span class="constant">Date</span>.today - <span class="number">7</span> }
  filter_params = params.empty? ? one_week_ago_params <span class="symbol">:</span> params

  distributed_to_dos = <span class="constant">ControlAPI</span>.get(<span class="string">'/v1/distributed_to_dos.json'</span>, <span class="symbol">:query</span> =&gt; filter_params)
  erb <span class="symbol">:distributed_to_dos</span>, <span class="symbol">:locals</span> =&gt; distributed_to_dos
<span class="keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <h2 id="webhooks-currently-in-development-">Webhooks (currently in development)</h2>
<p>Webhooks provide information about events in near real-time.  You provide a URL, and we&#39;ll <code>POST</code> to it as events take place.  When a <code>HTTP 5XX</code> response occurs, the Webhook is retried with an incremental backoff.</p>
<h3 id="format">Format</h3>
<p>Our webhooks have the following format:</p>
<pre><code>{
  &quot;metadata&quot;: {
    &quot;event&quot;: &quot;EventName&quot;,
    &quot;fired_at&quot;: &quot;2014-06-24T15:32:05Z&quot;
  },

  &quot;data&quot;: {
    // Depends on event, see below
  }
}</code></pre>
<h4 id="fields">Fields</h4>
<ul>
<li><code>metadata</code><ul>
<li><code>event</code>: A named event, as documented below</li>
<li><code>fired_at</code>: When the webhook was fired</li>
</ul>
</li>
<li><code>data</code>: an Object of data for the given event</li>
</ul>
<h3 id="implementation-requirements">Implementation Requirements</h3>
<p>The receiver of a webhook <strong>MUST</strong> check <code>metadata.event</code> on each <code>POST</code>.  An unknown <code>metadata.event</code> <strong>MUST</strong> be ignored.</p>
<p>Examples of why this behavior is required:</p>
<ul>
<li>If the <code>metadata.event</code> is not checked, and the receiver only looks at the <code>data.name</code> attribute, it could be a ToDo&#39;s name instead of a users&#39;s name.</li>
<li>If the <code>metadata.event</code> is not checked, a user could have been updated instead of created.  The receiver could then take action on an &quot;updated&quot; event that was only intended for a &quot;created&quot; event (e.g., sending a welcome email).</li>
</ul>
<h3 id="example">Example</h3>
<p>For a contrived example, if there were a <code>VoteCast</code> event, the webhook would provide data like the following in two separate <code>POST</code>s:</p>
<p>First <code>POST</code>:</p>
<pre><code>{
  &quot;metadata&quot;: {
    &quot;event&quot;: &quot;VoteCast&quot;,
    &quot;fired_at&quot;: &quot;2000-11-07T15:32:05Z&quot;
  },
  &quot;data&quot;: {
    &quot;full_name&quot;: &quot;Al Gore&quot;,
    &quot;party&quot;: &quot;Democrat&quot;
  }
}</code></pre>
<p>Second <code>POST</code>:</p>
<pre><code>{
  &quot;metadata&quot;: {
    &quot;event&quot;: &quot;VoteCast&quot;,
    &quot;fired_at&quot;: &quot;2000-11-07T15:42:05Z&quot;
  },
  &quot;data&quot;: {
    &quot;full_name&quot;: &quot;George W Bush&quot;,
    &quot;party&quot;: &quot;Republican&quot;
  }
}</code></pre>
<h2 id="events">Events</h2>
<h3 id="event-usercreated">Event: UserCreated</h3>
<h4 id="data-example">Data Example</h4>
<pre><code>{
  &quot;full_name&quot;: &quot;George Washington&quot;,
  &quot;first_name&quot;: &quot;George&quot;,
  &quot;last_name&quot;: &quot;Washington&quot;,
  &quot;email&quot;: &quot;gwashington@example.com&quot;
}</code></pre>
<h4 id="data-fields">Data Fields</h4>
<ul>
<li><code>full_name</code>: Formatted name, may be <code>null</code></li>
<li><code>first_name</code>: Personal name, may be <code>null</code></li>
<li><code>last_name</code>: Surname, may be <code>null</code></li>
<li><code>email</code>: Primary email</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>post <span class="string">'/webhook'</span> <span class="keyword">do</span>
  metadata = parsed_body[<span class="string">'metadata'</span>]
  data = parsed_body[<span class="string">'data'</span>]

  <span class="keyword">if</span> metadata[<span class="string">'event'</span>] == <span class="string">'UserCreated'</span>
    <span class="string">"Nice to meet you, <span class="subst">#{data[<span class="string">'full_name'</span>]}</span>!"</span>
  <span class="keyword">end</span>
<span class="keyword">end</span>

post <span class="string">'/webhook_with_error'</span> <span class="keyword">do</span>
  [<span class="number">500</span>, <span class="string">"Your request failed, sorry!"</span>]
<span class="keyword">end</span></pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
